<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë§ˆêµ¬ë§ˆêµ¬ ë°ì´í„° ì„¼í„° - (ì£¼)ê³µë¶€í•˜ì</title>
  
  <link rel="stylesheet" href="style.css">
  
  <style>
    /* ë§ˆêµ¬ë§ˆêµ¬ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
    .magu-hero {
      background: radial-gradient(circle at center, rgba(195, 0, 47, 0.15), transparent 70%); /* LG Red ëŠë‚Œ */
      text-align: center;
      padding: 60px 0;
    }
    .magu-badge {
      background: linear-gradient(135deg, #C3002F, #074CA1); /* LG Red to Samsung Blue */
      color: #fff; padding: 5px 12px; border-radius: 20px;
      font-weight: 800; font-size: 12px; text-transform: uppercase;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
    }
    .back-btn {
      display: inline-flex; align-items: center; gap: 8px;
      color: var(--muted); margin-bottom: 20px; font-size: 14px;
    }
    .back-btn:hover { color: #fff; text-decoration: underline; }

    /* ë ˆì´ì•„ì›ƒ ê·¸ë¦¬ë“œ */
    .about-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 40px;
    }
    
    /* ë‘ ì¹¸ ì°¨ì§€ ì¹´ë“œ */
    .full-width-card {
      grid-column: 1 / -1;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
    }

    /* VS ë§¤ì¹˜ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .vs-match-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 15px 25px;
      margin-bottom: 12px;
      transition: transform 0.2s;
    }
    .vs-match-row:hover { transform: translateY(-2px); background: rgba(255,255,255,0.05); }

    .team-box { text-align: center; width: 30%; }
    .team-name { font-size: 16px; margin-bottom: 4px; }
    .team-lg { color: #ff4d4d; } 
    .team-samsung { color: #4dabf7; }
    
    .score-box { text-align: center; width: 40%; }
    .score-text { font-size: 28px; font-weight: 800; color: #fff; letter-spacing: 2px; }
    .match-place { font-size: 12px; color: var(--muted); margin-top: 4px; }
    .match-date-badge { 
      font-size: 10px; padding: 2px 6px; border-radius: 4px; 
      background: rgba(255,255,255,0.1); color: #aaa; display:inline-block; margin-bottom:5px;
    }

    /* ìŠ¹ë¦¬ì ê°•ì¡° */
    .winner { font-weight: 900; opacity: 1; transform: scale(1.05); display:inline-block;}
    .loser { font-weight: 400; opacity: 0.5; }

    /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    .table-container {
      overflow-x: auto;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    table { width: 100%; border-collapse: collapse; white-space: nowrap; font-size: 14px; }
    th {
      background: rgba(255,255,255,0.05); color: var(--brand);
      padding: 12px 16px; text-align: left; border-bottom: 2px solid var(--border);
    }
    td {
      padding: 12px 16px; border-bottom: 1px solid var(--border); color: var(--text);
    }
    tbody tr:hover { background: rgba(255,255,255,0.03); }

    @media (max-width: 768px) {
      .about-grid { grid-template-columns: 1fr; }
      .vs-match-row { flex-direction: column; gap: 10px; padding: 20px; }
      .team-box, .score-box { width: 100%; }
    }
  </style>
</head>

<body>

  <header>
    <div class="container header-inner">
      <a class="logo" href="index.html">(ì£¼)ê³µë¶€í•˜ì</a>
      <nav>
        <ul class="nav-list">
          <li><a href="index.html#team">êµ¬ì„±ì›</a></li>
          <li><a href="index.html#projects">ë‹¤ë¥¸ í”„ë¡œì íŠ¸</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div class="container" style="padding-top: 40px;">
      <a href="index.html" class="back-btn">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
      
      <section class="magu-hero">
        <span class="magu-badge">Project No.05</span>
        <h1 style="font-size: clamp(32px, 4vw, 48px); margin: 15px 0;">âš¾ï¸ MaguMagu Data Center</h1>
        <p style="color: var(--muted); max-width: 600px; margin: 0 auto;">
          LG(ë‚˜í˜•ë™) vs ì‚¼ì„±(ì‹ ì„ ë¯¼)<br>
          ìì¡´ì‹¬ì„ ê±´ ì„¸ê¸°ì˜ ëŒ€ê²°, ê·¸ ì¹˜ì—´í•œ ê¸°ë¡ì˜ í˜„ì¥.
        </p>
      </section>

      <section id="overview">
        <div class="about-grid">
          
          <div class="card">
            <h3 style="color: var(--brand);">ì—°êµ¬ ëª©í‘œ (Goals)</h3>
            <ul style="color: var(--muted); padding-left: 20px; line-height: 1.8;">
              <li>ì „ì„¤(Legend) ì¹´ë“œ íšë“ í™•ë¥  ë¶„ì„</li>
              <li>ìƒëŒ€ ì „ì  ìš°ìœ„ë¥¼ í†µí•œ ì„œì—´ ì •ë¦¬</li>
              <li><strong>'ì••ë„ì  ê°ì‚¬' ì„¸ë ˆë¨¸ë‹ˆ ì—°êµ¬</strong></li>
            </ul>
          </div>

          <div class="card">
            <h3 style="color: #ff5e62;">ì°¸ì—¬ ì—°êµ¬ì›</h3>
            <div class="participants" style="margin-top:10px;">
              <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                <img src="images/team/nahyungdong.jpg" style="width:40px; height:40px; border-radius:50%; object-fit:cover;" onerror="this.src='https://via.placeholder.com/40'">
                <div>
                  <div style="font-weight:700; font-size:14px; color:#ff4d4d;">ë‚˜í˜•ë™ (LG)</div>
                  <div style="font-size:12px; color:var(--muted);">êµ¬ë‹¨ì£¼ & ìˆ˜ì„ì—°êµ¬ê´€</div>
                </div>
              </div>
              <div style="display:flex; align-items:center; gap:10px;">
                <img src="images/team/shinseonmin.jpg" style="width:40px; height:40px; border-radius:50%; object-fit:cover;" onerror="this.src='https://via.placeholder.com/40'">
                <div>
                  <div style="font-weight:700; font-size:14px; color:#4dabf7;">ì‹ ì„ ë¯¼ (Samsung)</div>
                  <div style="font-size:12px; color:var(--muted);">ì „ëµë¶„ì„ê´€</div>
                </div>
              </div>
            </div>
          </div>

          <div class="full-width-card">
            <div style="display:flex; justify-content:space-between; align-items:end; margin-bottom:15px;">
              <h3 style="margin:0; font-size:20px; color:#fff;">âš¡ï¸ ìµœê·¼ ê²½ê¸° ê²°ê³¼ (Recent Matches)</h3>
              <span style="font-size:12px; color:var(--muted);">ìµœê·¼ 3ê²½ê¸°</span>
            </div>
            
            <div id="recentMatchList">
              <div style="text-align:center; padding:20px; color:var(--muted);">ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
          </div>

        </div>
      </section>

      <section id="records">
        <div class="section-head" style="margin-bottom: 30px;">
          <h2>ğŸ“Š Full History</h2>
          <p>êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ì— ê¸°ë¡ëœ ì „ì²´ ì „ì ì…ë‹ˆë‹¤.</p>
        </div>

        <div class="table-container">
          <table id="maguTable">
            <thead>
              <tr id="tableHead"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
          <div id="loading" style="text-align:center; padding:40px; color:var(--muted);">
            ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘... âš¾ï¸
          </div>
        </div>
        <div style="margin-top: 20px; text-align: right; font-size: 12px; color: var(--faint);">
          * Data Source: Google Sheets
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="container" style="text-align:center; padding: 40px 0; color:var(--faint); font-size:12px;">
      Â© 2025 (ì£¼)ê³µë¶€í•˜ì MaguMagu Lab.
    </div>
  </footer>

<script>
    // â–¼ ë§í¬ëŠ” ê·¸ëŒ€ë¡œ ë‘ì„¸ìš” â–¼
    const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/1iiehoCN1p4v2gu1nChpfb5VznGhjwdgEFUVs1ohHp5Q/export?format=csv";
    
    async function loadSpreadsheet() {
      const tableHead = document.getElementById("tableHead");
      const tableBody = document.getElementById("tableBody");
      const loading = document.getElementById("loading");
      const recentList = document.getElementById("recentMatchList");

      try {
        console.log("ë°ì´í„° ìš”ì²­ ì¤‘...");
        const response = await fetch(SHEET_CSV_URL + "&t=" + new Date().getTime()); // ìºì‹œ ë°©ì§€ìš© ì‹œê°„ ì¶”ê°€
        const data = await response.text();

        if (data.trim().startsWith("<!")) {
          throw new Error("ê¶Œí•œ ì˜¤ë¥˜: ìŠ¤í”„ë ˆë“œì‹œíŠ¸ 'ê³µìœ ' ì„¤ì •ì´ë‚˜ 'ì›¹ì— ê²Œì‹œ'ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
        }

        // â˜… [í•µì‹¬ ìˆ˜ì •] ì‰¼í‘œê°€ í…ìŠ¤íŠ¸ ì•ˆì— ìˆì–´ë„ ì•ˆ ê¹¨ì§€ê²Œ ìë¥´ëŠ” í•¨ìˆ˜
        const parseCSV = (text) => {
            const rows = [];
            let currentRow = [];
            let currentCell = "";
            let inQuote = false;

            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                const nextChar = text[i+1];

                // ë”°ì˜´í‘œ ì²˜ë¦¬ ("ë°ì´í„°" -> ë°ì´í„°)
                if (char === '"') {
                    if (inQuote && nextChar === '"') { // ì´ìŠ¤ì¼€ì´í”„ ëœ ë”°ì˜´í‘œ ("")
                        currentCell += '"';
                        i++;
                    } else {
                        inQuote = !inQuote; // ë”°ì˜´í‘œ ì‹œì‘/ì¢…ë£Œ
                    }
                } 
                // ì‰¼í‘œ ì²˜ë¦¬ (ë”°ì˜´í‘œ ì•ˆì´ ì•„ë‹ ë•Œë§Œ ì¹¸ ë‚˜ëˆ„ê¸°)
                else if (char === ',' && !inQuote) {
                    currentRow.push(currentCell);
                    currentCell = "";
                } 
                // ì¤„ë°”ê¿ˆ ì²˜ë¦¬ (ë”°ì˜´í‘œ ì•ˆì´ ì•„ë‹ ë•Œë§Œ ì¤„ ë°”ê¾¸ê¸°)
                else if ((char === '\r' || char === '\n') && !inQuote) {
                    if (char === '\r' && nextChar === '\n') i++; // CRLF ì²˜ë¦¬
                    if (currentRow.length > 0 || currentCell) {
                        currentRow.push(currentCell);
                        rows.push(currentRow);
                        currentRow = [];
                        currentCell = "";
                    }
                } 
                // ì¼ë°˜ ê¸€ì
                else {
                    currentCell += char;
                }
            }
            if (currentRow.length > 0 || currentCell) {
                currentRow.push(currentCell);
                rows.push(currentRow);
            }
            return rows;
        };

        const rows = parseCSV(data);
        console.log("ë¶ˆëŸ¬ì˜¨ ë°ì´í„° ê°œìˆ˜:", rows.length);

        // ì´ˆê¸°í™”
        tableHead.innerHTML = "";
        tableBody.innerHTML = "";
        recentList.innerHTML = "";

        if (rows.length === 0) return;

        // 1. í—¤ë” ë§Œë“¤ê¸°
        rows[0].forEach(header => {
          const th = document.createElement("th");
          th.textContent = header.trim();
          tableHead.appendChild(th);
        });

        // 2. ì „ì²´ í…Œì´ë¸” ì±„ìš°ê¸°
        const cleanRows = rows.slice(1);
        cleanRows.forEach(rowData => {
          if (rowData.length < 2) return; // ë¹ˆ ì¤„ ë¬´ì‹œ
          const tr = document.createElement("tr");
          rowData.forEach(cell => {
            const td = document.createElement("td");
            td.textContent = cell.trim();
            tr.appendChild(td);
          });
          tableBody.appendChild(tr);
        });

        // 3. ìµœê·¼ ì „ì  ì¹´ë“œ ìƒì„± (ìµœì‹  3ê°œ)
        const recentMatches = [...cleanRows].reverse().slice(0, 3);

        if (recentMatches.length === 0) {
          recentList.innerHTML = '<div style="text-align:center; padding:20px; color:var(--muted);">ê¸°ë¡ëœ ì „ì ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
        } else {
          recentMatches.forEach(row => {
            // [0:ë‚ ì§œ, 1:êµ¬ë¶„, 2:ë‚´ìš©, 3:ê²°ê³¼, 4:ë¹„ê³ ]
            const date = row[0] || "-";
            const content = row[2] || "";
            const result = row[3] || "-";
            const place = row[4] || "Unknown";

            let scoreText = content; 
            const scoreMatch = content.match(/\d+\s*[:ëŒ€]\s*\d+/);
            if (scoreMatch) scoreText = scoreMatch[0];

            const isNaWin = result.includes("ìŠ¹");
            const naClass = isNaWin ? "team-lg winner" : "team-lg loser";
            const shinClass = !isNaWin ? "team-samsung winner" : "team-samsung loser";

            const matchHtml = `
              <div class="vs-match-row">
                <div class="team-box">
                  <div class="team-name ${naClass}">ë‚˜í˜•ë™ (LG)</div>
                </div>
                <div class="score-box">
                  <div class="match-date-badge">${date}</div>
                  <div class="score-text">${scoreText}</div>
                  <div class="match-place">ğŸ“ ${place}</div>
                </div>
                <div class="team-box">
                  <div class="team-name ${shinClass}">ì‹ ì„ ë¯¼ (Samsung)</div>
                </div>
              </div>
            `;
            recentList.innerHTML += matchHtml;
          });
        }
        
        loading.style.display = 'none';

      } catch (error) {
        console.error("ë¡œë”© ì‹¤íŒ¨:", error);
        loading.innerHTML = `<div style="color:#ff5e62">âš ï¸ ${error.message}</div>`;
      }
    }

    loadSpreadsheet();
  </script>
</body>
</html>
